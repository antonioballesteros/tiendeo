(this.webpackJsonpantonioapp=this.webpackJsonpantonioapp||[]).push([[0],{24:function(e,t,a){},25:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(18),i=a.n(r),o=(a(24),a(25),a(3)),d=a(0),s="TOKEN_LOADING",l="TOKEN_SUCCESS",u="TOKEN_ERROR",j="CARDS_LOADING",b="CARDS_LOAD_SUCCESS",O="CARDS_LOAD_ERROR",p="CARD_START_MANAGE",h="CARD_END_MANAGE",f="ADD_CARD_UPDATING",g="ADD_CARD_SUCCESS",m="ADD_CARD_ERROR",C="UPDATE_CARD_UPDATING",x="UPDATE_CARD_SUCCESS",D="UPDATE_CARD_ERROR",A="DELETE_CARD_UPDATING",y="DELETE_CARD_SUCCESS",S="DELETE_CARD_ERROR",v={auth:{loading:!1,error:!1,token:null}},N=function(e,t){var a=t.payload;switch(t.type){case s:return Object(d.a)(Object(d.a)({},e),{},{auth:Object(d.a)(Object(d.a)({},e.auth),{},{loading:!0,error:!1,token:null})});case l:return Object(d.a)(Object(d.a)({},e),{},{auth:Object(d.a)(Object(d.a)({},e.auth),{},{loading:!1,token:a})});case u:return Object(d.a)(Object(d.a)({},e),{},{auth:Object(d.a)(Object(d.a)({},e.auth),{},{loading:!1,error:a,token:null})});default:return e}},E=a(19),R={cards:{loading:!1,error:!1,data:null,updating:!1,manage:!1}},_=function(e,t){var a=t.payload;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!0,error:!1})});case b:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!1,data:a})});case O:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!1,error:a})});case p:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{updating:!1,manage:!0})});case h:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{manage:!1})});case f:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!0,error:!1})});case m:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!1,error:a})});case g:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!1,manage:!1,data:null===e.cards.data?[a]:[a].concat(Object(E.a)(e.cards.data))})});case C:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{updating:!0,error:!1})});case D:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{updating:!1,error:a})});case x:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!1,manage:!1,data:e.cards.data.map((function(e){return e.id===a.id?a:e}))})});case A:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{updating:!0,error:!1})});case S:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{updating:!1,error:a})});case y:return Object(d.a)(Object(d.a)({},e),{},{cards:Object(d.a)(Object(d.a)({},e.cards),{},{loading:!1,manage:!1,data:e.cards.data.filter((function(e){return e.id!==a.id}))})});default:return e}},k=a(1),T={},U=Object(c.createContext)(T),w=function(e){var t=e.children,a=Object(c.useReducer)(N,v),n=Object(o.a)(a,2),r=n[0],i=n[1],d=Object(c.useReducer)(_,R),s=Object(o.a)(d,2),l=s[0],u=s[1];return Object(k.jsx)(U.Provider,{value:{authState:r,authDispatch:i,cardsState:l,cardsDispatch:u},children:t})},L=a(5),I=a.n(L),P=function(e){e({type:s});var t=localStorage.getItem("token");t?e({type:l,payload:t}):I.a.get("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/users"),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){localStorage.setItem("token",t.data),e({type:l,payload:t.data})})).catch((function(t){e({type:u,payload:t?t.toString():"COULD NOT CONNECT"})}))},G=a(6),B=a.n(G),F=function(e){e({type:p})},q=function(e){e({type:h})},z=(a(45),function(e){var t=e.loading,a=e.cards,n=e.error,r=e.manage,i=Object(c.useState)(!1),s=Object(o.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),O=b[0],p=b[1],h=Object(c.useState)(!1),f=Object(o.a)(h,2),g=f[0],m=f[1],C=Object(c.useContext)(U).cardsDispatch;if(n)return Object(k.jsx)(H,{msg:n});if(t||!a)return Object(k.jsx)(Q,{});var x=function(e){F(C),m(e)},D=function(e){e===l?p(!O):u(!l)};return Object(k.jsxs)("div",{className:"cards",children:[Object(k.jsxs)("div",{className:"header",children:[Object(k.jsxs)("h4",{children:["Cards: ",a.length]}),Object(k.jsxs)("div",{className:"sorting-box",children:[Object(k.jsx)("span",{onClick:function(){return D(!0)},className:B()("ml-10 pointer",O?"under":"top",{bold:l}),children:"Title"}),Object(k.jsx)("span",{onClick:function(){return D(!1)},className:B()("ml-10 pointer",O?"under":"top",{bold:!l}),children:"Date"})]}),!r&&Object(k.jsx)(V,{onClick:function(){F(C),m(!1)},children:"Add"})]}),r&&Object(k.jsx)(ae,{onCancel:function(){q(C),m(!1)},id:g}),Object(k.jsx)("ul",{children:a.sort((function(e,t){var a=l?e.title:e.created,c=l?t.title:t.created;return a===c?0:O?a>c?1:-1:a<c?1:-1})).map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)(M,Object(d.a)(Object(d.a)({},e),{},{onEdit:x}))},e.id)}))})]})}),K=(a(46),a.p+"static/media/default-img.894ebd81.jpg"),M=function(e){var t=e.id,a=e.title,c=e.description,n=e.imageUrl,r=e.onEdit,i="/"===function(e){try{return new URL(e).pathname}catch(t){}return"/"}(n)?K:n;return Object(k.jsxs)("div",{className:"card",children:[Object(k.jsxs)("div",{className:"head",style:{backgroundImage:"url(".concat(i,")")},"data-testid":"background",children:[Object(k.jsx)("h3",{"data-testid":"title",children:a}),t&&r&&Object(k.jsx)(V,{className:"ml-auto mr-10 mb-10",onClick:function(){return r(t)},children:"Edit"})]}),Object(k.jsx)("h4",{children:c})]})},J=(a(47),function(e){var t=e.onCancel,a=e.onSubmit,n=e.onDelete,r=e.card,i=e.updating,d=e.error,s=Object(c.useState)(r.title),l=Object(o.a)(s,2),u=l[0],j=l[1],b=Object(c.useState)(r.description),O=Object(o.a)(b,2),p=O[0],h=O[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],C=g[1],x=Object(c.useState)(r.imageUrl),D=Object(o.a)(x,2),A=D[0],y=D[1];return Object(k.jsxs)("div",{className:"modal-card",children:[!!d&&Object(k.jsx)(H,{msg:d}),Object(k.jsx)("h2",{children:r.id?"Update Card":"New Card"}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u&&p&&a({id:r.id,title:u,description:p,image:m})},children:[Object(k.jsx)(W,{required:!0,name:"title",value:u,placeholder:"Title",onChange:function(e){j(e.target.value)},disabled:i}),Object(k.jsx)(W,{required:!0,name:"description",value:p,placeholder:"Description",onChange:function(e){h(e.target.value)},disabled:i}),!r.id&&Object(k.jsx)(W,{name:"image",type:"file",onChange:function(e){e.target.files.length?(C(e.target.files[0]),y(URL.createObjectURL(e.target.files[0]))):(C(null),y(null))},disabled:i}),Object(k.jsx)("h3",{children:"Preview Card"}),Object(k.jsx)(M,{title:u,description:p,imageUrl:A}),Object(k.jsxs)("div",{className:"options","data-testid":"options",children:[Object(k.jsx)(V,{className:"mr-auto",type:"reset",onClick:t,disabled:i,children:"Cancel"}),!!r.id&&Object(k.jsx)(V,{className:"mr-10",onClick:function(e){e.preventDefault(),r.id&&n(r)},disabled:i,children:"Delete"}),Object(k.jsx)(V,{className:"mr-10",type:"submit",disabled:i,children:r.id?"Update":"Create"})]})]})]})}),H=(a(48),function(e){var t=e.msg,a=Object(c.useState)(!0),n=Object(o.a)(a,2),r=n[0],i=n[1];return r?Object(k.jsxs)("div",{className:"errorCard",onClick:function(){i(!1)},children:[Object(k.jsx)("h3",{children:"Problem with api:"}),Object(k.jsx)("h4",{children:t})]}):null}),Q=(a(49),function(){return Object(k.jsx)("div",{className:"loading",children:"I'm a nice loading"})}),V=(a(50),function(e){var t=e.children,a=e.onClick,c=e.className,n=e.type;return Object(k.jsx)("button",{onClick:a,className:B()("button",c),type:n,children:t})}),W=(a(51),function(e){var t=e.className,a=e.required,c=e.name,n=e.value,r=e.placeholder,i=e.onChange,o=e.disabled,d=e.type;return Object(k.jsx)("input",{className:B()("input",t),required:a,name:c,value:n,placeholder:r,onChange:i,disabled:o,type:d,autoComplete:"off"})}),X=function(){var e=Object(c.useContext)(U),t=e.authDispatch,a=e.authState.auth,n=a.loading,r=a.error,i=a.token;return Object(c.useEffect)((function(){n||r||i||P(t)})),Object(k.jsxs)("div",{className:"login",children:[n&&Object(k.jsx)("h2",{children:"Login ..."}),r&&Object(k.jsx)(H,{msg:r})]})},Y=function(e,t){t({type:j});I.a.get("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards"),{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(e)}}).then((function(e){t({type:b,payload:e.data})})).catch((function(e){t({type:O,payload:e?e.toString():"??"})}))},Z=function(){var e=Object(c.useContext)(U),t=e.cardsDispatch,a=e.authState.auth.token,n=e.cardsState.cards,r=n.data,i=n.loading,o=n.error,d=n.manage;return Object(c.useEffect)((function(){!a||i||o||r||Y(a,t)})),a?Object(k.jsx)(z,{cards:r,loading:i,error:o,manage:d}):Object(k.jsx)(X,{})},$=function(e,t,a){a({type:f});var c=new FormData;c.append("title",t.title),c.append("description",t.description),t.image&&c.append("image",t.image);I.a.post("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards"),c,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e)}}).then((function(e){a({type:g,payload:e.data})})).catch((function(e){a({type:m,payload:e?e.toString():"??"})}))},ee=function(e,t,a){a({type:C});var c={title:t.title,description:t.description};I.a.put("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards/").concat(t.id),c,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){a({type:x,payload:e.data})})).catch((function(e){a({type:D,payload:e.toString()})}))},te=function(e,t,a){a({type:A});I.a.delete("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards/").concat(t.id),{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){a({type:y,payload:t})})).catch((function(e){a({type:S,payload:e?e.toString():"??"})}))},ae=function(e){var t=e.id,a=e.onCancel,n=Object(c.useContext)(U),r=n.cardsDispatch,i=n.authState.auth.token,o=n.cardsState.cards,d=o.data,s=o.updating,l=o.error,u=t?d.find((function(e){return e.id===t})):{id:null,title:"",description:"",imageUrl:null};return Object(k.jsx)(J,{onSubmit:function(e){e.id?ee(i,e,r):$(i,e,r)},onDelete:function(e){te(i,e,r)},onCancel:a,card:u,updating:s,error:l})},ce=(a(52),function(){return Object(k.jsx)(w,{children:Object(k.jsxs)("div",{className:"app",children:[Object(k.jsx)("header",{children:Object(k.jsx)("h1",{children:"AntonioApp"})}),Object(k.jsx)(Z,{})]})})}),ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),r(e),i(e)}))};i.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(ce,{})}),document.getElementById("root")),ne()}},[[53,1,2]]]);
//# sourceMappingURL=main.1a9a0805.chunk.js.map