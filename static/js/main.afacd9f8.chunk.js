(this.webpackJsonpantonioapp=this.webpackJsonpantonioapp||[]).push([[0],{24:function(t,e,a){},25:function(t,e,a){},45:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){},51:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){"use strict";a.r(e);var c=a(2),n=a.n(c),r=a(18),i=a.n(r),d=(a(24),a(25),a(3)),o=a(0),s="TOKEN_LOADING",l="TOKEN_SUCCESS",u="TOKEN_ERROR",j="CARDS_LOADING",b="CARDS_LOAD_SUCCESS",O="CARDS_LOAD_ERROR",p="CARD_START_MANAGE",h="CARD_END_MANAGE",f="ADD_CARD_UPDATING",g="ADD_CARD_SUCCESS",m="ADD_CARD_ERROR",C="UPDATE_CARD_UPDATING",x="UPDATE_CARD_SUCCESS",D="UPDATE_CARD_ERROR",A="DELETE_CARD_UPDATING",v="DELETE_CARD_SUCCESS",y="DELETE_CARD_ERROR",S={auth:{loading:!1,error:!1,token:null}},N=function(t,e){var a=e.payload;switch(e.type){case s:return Object(o.a)(Object(o.a)({},t),{},{auth:Object(o.a)(Object(o.a)({},t.auth),{},{loading:!0,error:!1,token:null})});case l:return Object(o.a)(Object(o.a)({},t),{},{auth:Object(o.a)(Object(o.a)({},t.auth),{},{loading:!1,token:a})});case u:return Object(o.a)(Object(o.a)({},t),{},{auth:Object(o.a)(Object(o.a)({},t.auth),{},{loading:!1,error:a,token:null})});default:return t}},k=a(19),E={cards:{loading:!1,error:!1,data:null,updating:!1,manage:!1}},R=function(t,e){var a=e.payload;switch(e.type){case j:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!0,error:!1})});case b:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!1,data:a})});case O:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!1,error:a})});case p:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{updating:!1,manage:!0})});case h:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{manage:!1})});case f:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!0,error:!1})});case m:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!1,error:a})});case g:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!1,manage:!1,data:null===t.cards.data?[a]:[a].concat(Object(k.a)(t.cards.data))})});case C:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{updating:!0,error:!1})});case D:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{updating:!1,error:a})});case x:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!1,manage:!1,data:t.cards.data.map((function(t){return t.id===a.id?a:t}))})});case A:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{updating:!0,error:!1})});case y:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{updating:!1,error:a})});case v:return Object(o.a)(Object(o.a)({},t),{},{cards:Object(o.a)(Object(o.a)({},t.cards),{},{loading:!1,manage:!1,data:t.cards.data.filter((function(t){return t.id!==a.id}))})});default:return t}},_=a(1),T={},U=Object(c.createContext)(T),w=function(t){var e=t.children,a=Object(c.useReducer)(N,S),n=Object(d.a)(a,2),r=n[0],i=n[1],o=Object(c.useReducer)(R,E),s=Object(d.a)(o,2),l=s[0],u=s[1];return Object(_.jsx)(U.Provider,{value:{authState:r,authDispatch:i,cardsState:l,cardsDispatch:u},children:e})},L=a(5),P=a.n(L),I=function(t){var e=t.dispatch;e({type:s});var a=localStorage.getItem("token");a?e({type:l,payload:a}):P.a.get("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/users"),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){localStorage.setItem("token",t.data),e({type:l,payload:t.data})})).catch((function(t){e({type:u,payload:t?t.toString():"COULD NOT CONNECT"})}))},G=a(6),B=a.n(G),F=function(t){(0,t.dispatch)({type:p})},q=function(t){(0,t.dispatch)({type:h})},z=(a(45),function(t){var e=t.loading,a=t.cards,n=t.error,r=t.manage,i=Object(c.useState)(!1),s=Object(d.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),O=b[0],p=b[1],h=Object(c.useState)(!1),f=Object(d.a)(h,2),g=f[0],m=f[1],C=Object(c.useContext)(U).cardsDispatch;if(n)return Object(_.jsx)(H,{msg:n});if(e||!a)return Object(_.jsx)(Q,{});var x=function(t){F({dispatch:C}),m(t)},D=function(t){t===l?p(!O):u(!l)};return Object(_.jsxs)("div",{className:"cards",children:[Object(_.jsxs)("div",{className:"header",children:[Object(_.jsxs)("h4",{children:["Cards: ",a.length]}),Object(_.jsxs)("div",{className:"sorting-box",children:[Object(_.jsx)("span",{onClick:function(){return D(!0)},className:B()("ml-10 pointer",O?"under":"top",{bold:l}),children:"Title"}),Object(_.jsx)("span",{onClick:function(){return D(!1)},className:B()("ml-10 pointer",O?"under":"top",{bold:!l}),children:"Date"})]}),!r&&Object(_.jsx)(W,{onClick:function(){F({dispatch:C}),m(!1)},children:"Add"})]}),r&&Object(_.jsx)(nt,{onCancel:function(){q({dispatch:C}),m(!1)},id:g}),Object(_.jsx)("ul",{children:a.sort((function(t,e){var a=l?t.title:t.created,c=l?e.title:e.created;return a===c?0:O?a>c?1:-1:a<c?1:-1})).map((function(t){return Object(_.jsx)("li",{children:Object(_.jsx)(M,Object(o.a)(Object(o.a)({},t),{},{onEdit:x}))},t.id)}))})]})}),K=(a(46),a.p+"static/media/default-img.894ebd81.jpg"),M=function(t){var e=t.id,a=t.title,c=t.description,n=t.imageUrl,r=t.onEdit,i="/"===function(t){try{return new URL(t).pathname}catch(e){}return"/"}(n)?K:n;return Object(_.jsxs)("div",{className:"card",children:[Object(_.jsxs)("div",{className:"head",style:{backgroundImage:"url(".concat(i,")")},"data-testid":"background",children:[Object(_.jsx)("h3",{"data-testid":"title",children:a}),e&&r&&Object(_.jsx)(W,{className:"ml-auto mr-10 mb-10",onClick:function(){return r(e)},children:"Edit"})]}),Object(_.jsx)("h4",{children:c})]})},J=(a(47),function(t){var e=t.onCancel,a=t.onSubmit,n=t.onDelete,r=t.card,i=t.updating,o=t.error,s=Object(c.useState)(r.title),l=Object(d.a)(s,2),u=l[0],j=l[1],b=Object(c.useState)(r.description),O=Object(d.a)(b,2),p=O[0],h=O[1],f=Object(c.useState)(null),g=Object(d.a)(f,2),m=g[0],C=g[1],x=Object(c.useState)(r.imageUrl),D=Object(d.a)(x,2),A=D[0],v=D[1];return Object(_.jsxs)("div",{className:"modal-card",children:[!!o&&Object(_.jsx)(H,{msg:o}),Object(_.jsx)("h2",{children:r.id?"Update Card":"New Card"}),Object(_.jsxs)("form",{onSubmit:function(t){t.preventDefault(),u&&p&&a({id:r.id,title:u,description:p,image:m})},children:[Object(_.jsx)(Y,{required:!0,name:"title",value:u,placeholder:"Title",onChange:function(t){j(t.target.value)},disabled:i}),Object(_.jsx)(Y,{required:!0,name:"description",value:p,placeholder:"Description",onChange:function(t){h(t.target.value)},disabled:i}),!r.id&&Object(_.jsx)(Y,{name:"image",type:"file",onChange:function(t){t.target.files.length?(C(t.target.files[0]),v(URL.createObjectURL(t.target.files[0]))):(C(null),v(null))},disabled:i}),Object(_.jsx)("h3",{children:"Preview Card"}),Object(_.jsx)(M,{title:u,description:p,imageUrl:A}),Object(_.jsxs)("div",{className:"options","data-testid":"options",children:[Object(_.jsx)(W,{className:"mr-auto",type:"reset",onClick:e,disabled:i,children:"Cancel"}),!!r.id&&Object(_.jsx)(W,{className:"mr-10",onClick:function(t){t.preventDefault(),r.id&&n(r)},disabled:i,children:"Delete"}),Object(_.jsx)(W,{className:"mr-10",type:"submit",disabled:i,children:r.id?"Update":"Create"})]})]})]})}),H=(a(48),function(t){var e=t.msg,a=Object(c.useState)(!0),n=Object(d.a)(a,2),r=n[0],i=n[1];return r?Object(_.jsxs)("div",{className:"errorCard",onClick:function(){i(!1)},children:[Object(_.jsx)("h3",{children:"Problem with api:"}),Object(_.jsx)("h4",{children:e})]}):null}),Q=(a(49),function(){return Object(_.jsx)("div",{className:"loading",children:"I'm a nice loading"})}),V=(a(50),function(t){var e=t.children,a=t.onClick,c=t.className,n=t.type;return Object(_.jsx)("button",{onClick:a,className:B()("button",c),type:n,children:e})});V.defaultProps={type:"button"};var W=V,X=(a(51),function(t){var e=t.className,a=t.required,c=t.name,n=t.value,r=t.placeholder,i=t.onChange,d=t.disabled,o=t.type;return Object(_.jsx)("input",{className:B()("input",e),required:a,name:c,value:n,placeholder:r,onChange:i,disabled:d,type:o,autoComplete:"off"})});X.defaultProps={type:"text"};var Y=X,Z=function(){var t=Object(c.useContext)(U),e=t.authDispatch,a=t.authState.auth,n=a.loading,r=a.error,i=a.token;return Object(c.useEffect)((function(){n||r||i||I({dispatch:e})})),Object(_.jsxs)("div",{className:"login",children:[n&&Object(_.jsx)("h2",{children:"Login ..."}),r&&Object(_.jsx)(H,{msg:r})]})},$=function(t){var e=t.token,a=t.dispatch;a({type:j});P.a.get("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards"),{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(e)}}).then((function(t){a({type:b,payload:t.data})})).catch((function(t){a({type:O,payload:t?t.toString():"??"})}))},tt=function(){var t=Object(c.useContext)(U),e=t.cardsDispatch,a=t.authState.auth.token,n=t.cardsState.cards,r=n.data,i=n.loading,d=n.error,o=n.manage;return Object(c.useEffect)((function(){!a||i||d||r||$({token:a,dispatch:e})})),a?Object(_.jsx)(z,{cards:r,loading:i,error:d,manage:o}):Object(_.jsx)(Z,{})},et=function(t){var e=t.token,a=t.data,c=t.dispatch;c({type:f});var n=new FormData;n.append("title",a.title),n.append("description",a.description),a.image&&n.append("image",a.image);P.a.post("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards"),n,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e)}}).then((function(t){c({type:g,payload:t.data})})).catch((function(t){c({type:m,payload:t?t.toString():"??"})}))},at=function(t){var e=t.token,a=t.data,c=t.dispatch;c({type:C});var n={title:a.title,description:a.description};P.a.put("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards/").concat(a.id),n,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){c({type:x,payload:t.data})})).catch((function(t){c({type:D,payload:t.toString()})}))},ct=function(t){var e=t.token,a=t.data,c=t.dispatch;c({type:A});P.a.delete("".concat("https://tiendeo-frontend-cards-api.herokuapp.com","/cards/").concat(a.id),{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){c({type:v,payload:a})})).catch((function(t){c({type:y,payload:t?t.toString():"??"})}))},nt=function(t){var e=t.id,a=t.onCancel,n=Object(c.useContext)(U),r=n.cardsDispatch,i=n.authState.auth.token,d=n.cardsState.cards,o=d.data,s=d.updating,l=d.error,u=e?o.find((function(t){return t.id===e})):{id:null,title:"",description:"",imageUrl:null};return Object(_.jsx)(J,{onSubmit:function(t){t.id?at({token:i,data:t,dispatch:r}):et({token:i,data:t,dispatch:r})},onDelete:function(t){ct({token:i,data:t,dispatch:r})},onCancel:a,card:u,updating:s,error:l})},rt=(a(52),function(){return Object(_.jsx)(w,{children:Object(_.jsxs)("div",{className:"app",children:[Object(_.jsx)("header",{children:Object(_.jsx)("h1",{children:"AntonioApp"})}),Object(_.jsx)(tt,{})]})})}),it=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(e){var a=e.getCLS,c=e.getFID,n=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),c(t),n(t),r(t),i(t)}))};i.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(rt,{})}),document.getElementById("root")),it()}},[[53,1,2]]]);
//# sourceMappingURL=main.afacd9f8.chunk.js.map